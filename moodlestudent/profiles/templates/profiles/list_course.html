{% extends 'user/base.html' %} {% block content %} {% if messages %}

<div
  class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative"
  role="alert"
>
  <strong class="font-bold">{{ message }}</strong>
</div>
{% else %}
<div
  class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative"
  role="alert"
>
  <strong class="font-bold"
    >{{ user.username }}, Welcome back we are so proud to see you.You last
    connexion is {{ user.last_login| date:"Y-m-d H:i:s"}}</strong
  >
</div>
{% endif %}

<div class="flex h-screen bg-white-200">
  <!-- Sidebar -->
  <aside class="w-64 bg-gray-800 p-4 text-white">
    <div class="text-2xl font-bold mb-4">Mes Cours</div>

    <ul>
        {% for course in profile.courses.all %}
      <li class="mb-2">
        <a href="{% url 'course:view_course' course.id %}" class="block text-gray-300 hover:text-white">{{ course.name }}</a>
      </li>
     {% endfor %}
    </ul>
  </aside>
{% if courses %}
  <div class="flex flex-wrap justify-center">
    {% for course in available_course %}
      <div class="flex-1 p-8">
        <div class="max-w-md mx-2 my-4 bg-white rounded-md overflow-hidden shadow-md">
          <img
            class="w-full h-48 object-cover object-center"
            src="{{ course.image.url }}"
            alt="Card Image"
          />
  
          <div class="p-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-2">
              {{ course.name }}
            </h2>
            <p class="text-gray-600 mb-4">Professeur {{ course.intervenant }}</p>
            <p class="text-sm text-gray-500 mb-4">
              {{ course.deux_premieres_phrases }}
            </p>
  
            <div class="flex justify-center">
              <a
                href="{% url 'course:view_course' course.id %}"
                class="bg-green-500 hover:bg-green-700 text-white py-2 px-20 rounded-5"
              >
              Details
              </a>
              <button
                class="bg-green-500 hover:bg-orange-700 text-white py-2 px-20 rounded-6" data-course-id="{{ course.id  }}"
              >
                Add
              </button>
            </div>
          </div>
        </div>
      </div>
  
      <!-- {% if forloop.counter|divisibleby:3 and not forloop.last %}
        </div><div class="flex flex-wrap justify-center">
      {% endif %}
    {% endfor %} -->
  </div>
  </div>
 
    <div class="flex justify-center mt-4">
      <nav class="inline-flex">
        {% if courses.has_previous %}
        <a
          href="#"
          class="px-3 py-1 border rounded-l-md border-gray-300 bg-gray-100 text-gray-500 hover:bg-gray-200"
          >«</a
        >
        {% endif %} {% if courses.has_next %}
        <a
          href="?page=1"
          class="px-3 py-1 border border-t-0 border-b-0 border-gray-300 bg-gray-100 text-gray-700 hover:bg-gray-200"
          >First</a
        >
        <a
          href="?page={{ courses.previous_page_number }}"
          class="px-3 py-1 border-t-0 border-b-0 border-gray-300 bg-gray-100 text-gray-500 hover:bg-gray-200"
          >Previous</a
        >
        {% endif %} Numero de la page: {{ courses.number }} of {{
        courses.paginator.num_pages }} {% if courses.has_next %}

        <a
          href="?page={{ courses.next_page_number }}"
          class="px-3 py-1 border-t-0 border-b-0 border-gray-300 bg-gray-100 text-gray-500 hover:bg-gray-200"
          >Next</a
        >
        <a
          href="?page={{ courses.num_pages }}"
          class="px-3 py-1 border-t-0 border-b-0 border-gray-300 bg-gray-100 text-gray-500 hover:bg-gray-200"
          >Last</a
        >
        {% endif %}
      </nav>
    </div>
  </div>
</div>
{% else %}

  <div class="flex items-center justify-center h-screen w-full">
    <div class="bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-8 rounded-lg flex items-center">
      <div class="mr-4">
        <i class="fas fa-exclamation-triangle text-4xl"></i>
      </div>
      <div>
        <p class="font-bold text-xl">Erreur !</p>
        <p>Aucun cours ne correspond à votre recherche!!!</p>
      </div>
    </div>
  </div>
  

{% endif %}

{% endblock %}

<script>
    $(document).ready(function() {
        $('#add-course-btn').on('click', function() 
            var courseId = $(this).data('course-id');
            $.ajax({
                type: 'POST',
                url: `/add_course/${courseId}/`,
                dataType: 'json',
                success: function(data) {
                    if (data.success) {
                        alert('Cours ajouté avec succès!');
                    } else {
                        alert('Erreur lors de l\'ajout du cours: ' + data.error);
                    }
                },
                error: function() {
                    alert('Une erreur s\'est produite lors de la requête AJAX.');
                }
            });
        });
    });
</script>























